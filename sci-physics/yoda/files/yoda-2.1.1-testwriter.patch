https://gitlab.com/hepcedar/yoda/-/merge_requests/363
From 9ea39901ed84e1b2c76c08830cc2df927216eda2 Mon Sep 17 00:00:00 2001
From: Christian Gutschow <chris.g@cern.ch>
Date: Tue, 19 Aug 2025 11:47:50 +0100
Subject: [PATCH] add H5 protection

---
 include/YODA/Writer.h | 2 +-
 tests/TestWriter.cc   | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/YODA/Writer.h b/include/YODA/Writer.h
index 0372533e8..5f9c0e5e6 100644
--- a/include/YODA/Writer.h
+++ b/include/YODA/Writer.h
@@ -9,8 +9,8 @@
 #include "YODA/AnalysisObject.h"
 #include "YODA/Utils/Traits.h"
 
-#ifdef HAVE_HDF5
 #include <YODA/Config/BuildConfig.h>
+#ifdef HAVE_HDF5
 #ifdef WITH_HIGHFIVE
 #include <YODA/highfive/H5File.hpp>
 #else
diff --git a/tests/TestWriter.cc b/tests/TestWriter.cc
index fc0bd0792..8750f225e 100644
--- a/tests/TestWriter.cc
+++ b/tests/TestWriter.cc
@@ -5,7 +5,9 @@
 #include "YODA/Scatter.h"
 #include "YODA/WriterYODA.h"
 #include "YODA/WriterYODA1.h"
+#ifdef HAVE_HDF5
 #include "YODA/WriterH5.h"
+#endif
 #include <cmath>
 #include <vector>
 #include <iostream>
-- 
GitLab

